<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>BENJA TopUp Store</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif;}
body{background:#0a0e17;color:#fff;overflow-x:hidden;}
a{text-decoration:none;color:inherit;}
header{height:220px;background:url('src/IMG-20251020-WA0000.jpg') center/cover no-repeat;filter:brightness(0.35) blur(1px);border-bottom:2px solid rgba(0,153,255,0.4);}
.logo-area{position:relative;text-align:center;margin-top:-60px;}
.logo-area img{width:120px;border-radius:50%;border:3px solid #00aaff;box-shadow:0 0 25px #00aaff;background:#0f1218;}
.logo-area h1{font-size:28px;color:#00b7ff;margin-top:10px;text-shadow:0 0 15px #009dff;}
.logo-area p{font-size:14px;color:#a0caff;margin-top:4px;}
.container{padding:20px;max-width:1000px;margin:20px auto;display:flex;flex-direction:column;gap:20px;}
.card{background:rgba(17,22,33,0.85);border-radius:15px;padding:20px;border:1px solid rgba(0,153,255,0.3);box-shadow:0 0 25px rgba(0,153,255,0.1);backdrop-filter:blur(8px);transition:0.3s;}
.card h2{text-align:center;color:#00b7ff;margin-bottom:15px;font-size:22px;text-shadow:0 0 8px #00eaff;}
.packages{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:20px;}
.item{position:relative;overflow:hidden;background:rgba(255,255,255,0.05);padding:15px;border-radius:15px;border:1px solid rgba(0,153,255,0.2);text-align:center;transition:transform 0.3s, box-shadow 0.3s;}
.item:hover{transform:scale(1.05);box-shadow:0 0 30px #00aaff;}
.item img{width:100px;border-radius:10px;margin-bottom:10px;transition:0.3s;}
.item .price{color:#00eaff;font-weight:bold;margin-bottom:5px;}
.qty-controls{display:flex;gap:10px;margin-top:5px;}
.qty-controls button{padding:5px 10px;background:#0078ff;border:none;color:#fff;border-radius:6px;cursor:pointer;font-weight:bold;transition:0.2s;}
.qty-controls button:hover{background:#00bfff;}
.qty-controls span{min-width:30px;text-align:center;display:inline-block;}
.file-upload{display:flex;align-items:center;justify-content:center;position:relative;border:2px dashed rgba(0,153,255,0.4);border-radius:12px;padding:18px;cursor:pointer;transition:0.3s;background:rgba(0,153,255,0.05);}
.file-upload:hover{background:rgba(0,153,255,0.12);box-shadow:0 0 15px #00aaff;}
.file-upload input[type="file"]{position:absolute;opacity:0;cursor:pointer;width:100%;height:100%;}
.file-upload span{color:#00b7ff;font-weight:600;}
.order-summary{margin-top:15px;background:rgba(0,0,0,0.35);border-radius:15px;padding:20px;border:1px solid rgba(0,153,255,0.3);transition:0.3s;}
.order-summary ul{list-style:none;padding-left:0;margin-top:10px;}
.order-summary li{margin-bottom:5px;opacity:1;transition:opacity 0.3s;}
#totalPrice{text-align:right;font-weight:bold;font-size:16px;margin-top:10px;}
.success-message{display:none;background:rgba(0,255,0,0.05);border-left:5px solid #00ffb0;text-align:center;padding:15px;margin-top:20px;color:#00ffb0;animation:fadeIn 0.6s ease-in-out;}
@keyframes fadeIn{from{opacity:0;}to{opacity:1;}}
#promoCode{width:50%;padding:8px;margin-top:10px;border-radius:6px;border:1px solid rgba(0,153,255,0.3);background:rgba(0,0,0,0.4);color:#fff;}
#applyPromo,#clearCart{padding:8px 12px;margin:5px;border:none;border-radius:6px;cursor:pointer;font-weight:bold;transition:0.3s;}
#applyPromo{background:#00b7ff;color:#000;}
#applyPromo:hover{background:linear-gradient(90deg,#00eaff,#0078ff);color:#fff;transform:scale(1.05);}
#clearCart{background:#ff0055;color:#fff;}
#clearCart:hover{background:#ff3399;transform:scale(1.05);}
#playerId{flex:1;padding:10px 15px;border-radius:8px;border:1px solid #00b7ff;background:rgba(0,0,0,0.4);color:#fff;font-size:16px;outline:none;transition:0.3s;}
#playerId:focus{border-color:#00eaff;box-shadow:0 0 10px #00eaff;background:rgba(0,0,0,0.6);}
.player-id-container{margin-top:15px;display:flex;align-items:center;gap:10px;}
.whatsapp-btn{background:#0078ff;color:#fff;padding:12px;border:none;border-radius:8px;font-weight:bold;font-size:16px;width:100%;cursor:pointer;transition:all 0.3s;box-shadow:0 0 15px rgba(0,153,255,0.3);}
.whatsapp-btn:hover{background:linear-gradient(90deg,#00eaff,#0078ff);box-shadow:0 0 30px rgba(0,153,255,0.6);transform:scale(1.05);}
.whatsapp-btn.pulse{animation:pulse 1.5s infinite;}
@keyframes pulse{0%{box-shadow:0 0 15px rgba(0,153,255,0.3);}50%{box-shadow:0 0 25px rgba(0,255,255,0.6);}100%{box-shadow:0 0 15px rgba(0,153,255,0.3);}}
#receiptPreview{margin-top:10px;max-width:100%;border-radius:12px;display:block;transition:opacity 0.4s ease;}
footer{text-align:center;padding:10px;margin-top:20px;color:#00b7ff;}
@media(max-width:600px){.packages{grid-template-columns:1fr;}#promoCode{width:70%;}}
</style>
</head>
<body>
<header></header>
<div class="logo-area">
  <img src="https://files.catbox.moe/d1o2hs.jpg" alt="NIM Logo">
  <h1>BENJA TOPUP STORE</h1>
  <p>Fast ‚Ä¢ Trusted ‚Ä¢ Secure</p>
</div>

<div class="container">
  <div class="card">
    <h2>üíé Select Your Package</h2>
    <div class="packages" id="packages"></div>
  </div>

  <div class="card">
    <h2>üìã Your Order</h2>
    <div class="order-summary">
      <div class="player-id-container">
        <span>üë§</span>
        <input type="text" id="playerId" placeholder="Enter your Free Fire ID">
      </div>

      <label style="margin-top:15px;display:block;"><b>Upload Payment Receipt (PDF/Image):</b></label>
      <div class="file-upload" onclick="document.getElementById('receipt').click()">
        <span>üìé Choose File</span>
        <input type="file" id="receipt" accept="image/*,.pdf" onchange="previewReceipt()">
      </div>
      <img id="receiptPreview" src="" alt="" style="display:none;"/>

      <h3 style="margin-top:15px;color:#00eaff;">Order Details:</h3>
      <ul id="orderList"></ul>
      <p id="totalPrice">Total: 0 LKR</p>

      <div>
        <input type="text" id="promoCode" placeholder="Enter Promo Code">
        <button id="applyPromo" onclick="applyPromo()">Apply</button>
      </div>
      <button id="clearCart" onclick="clearCart()">Clear Cart</button>

      <button class="whatsapp-btn pulse" onclick="sendOrder()">üöÄ Send Order via WhatsApp</button>

      <div id="success" class="success-message">
        ‚úÖ Order prepared successfully!<br>
        ‚è≥ Please check WhatsApp to send your order.<br>
        üôè Thank You ‚ù§Ô∏è
      </div>
    </div>
  </div>
</div>

<footer>¬© 2025 BENJA TopUp Store | All Rights Reserved</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
document.addEventListener("DOMContentLoaded", function(){

const products = [
  {name:"Weekly Lite Membership",price:120,img:"https://i.ibb.co/3yzYB4tc/2681e4aad1c72837.jpg"},
  {name:"Weekly Membership",price:480,img:"https://i.ibb.co/XxPzttVP/af85c42caad4127d.jpg"},
  {name:"Monthly Membership",price:2300,img:"https://i.ibb.co/m5HtMtfJ/64dbaeaedb021e55.jpg"},
  {name:"100 Diamonds",price:270,img:"https://i.ibb.co/HfR9TPWw/c26786fb15d7e0f8.jpg"},
  {name:"520 Diamonds",price:1360,img:"https://i.ibb.co/HfR9TPWw/c26786fb15d7e0f8.jpg"},
  {name:"1080 Diamonds",price:2880,img:"https://i.ibb.co/HfR9TPWw/c26786fb15d7e0f8.jpg"}
];

const packageContainer = document.getElementById("packages");
const orderList = document.getElementById("orderList");
const totalPrice = document.getElementById("totalPrice");
const receiptPreview = document.getElementById("receiptPreview");
let order = [], total = 0, discount = 0;

products.forEach((p,i)=>{
  const item = document.createElement("div");
  item.className = "item";
  item.innerHTML = `
    <img src="${p.img}" alt="${p.name}">
    <p>${p.name}</p>
    <p class="price">${p.price.toLocaleString()} LKR</p>
    <div class="qty-controls">
      <button onclick="changeQty(${i},-1)">-</button>
      <span id="qty-${i}">0</span>
      <button onclick="changeQty(${i},1)">+</button>
    </div>
  `;
  packageContainer.appendChild(item);
});

window.changeQty = function(index, delta){
  const qtySpan = document.getElementById(`qty-${index}`);
  let qty = parseInt(qtySpan.textContent);
  qty += delta;
  if(qty < 0) qty = 0;
  qtySpan.textContent = qty;
  updateOrder();
}

function updateOrder(){
  order = []; total = 0; orderList.innerHTML = "";
  products.forEach((p,i)=>{
    let qty = parseInt(document.getElementById(`qty-${i}`).textContent);
    if(qty>0){
      const subTotal = p.price*qty;
      order.push({name:p.name, qty, subTotal});
      const li = document.createElement("li");
      li.textContent = `${p.name} x${qty} = ${subTotal.toLocaleString()} LKR`;
      orderList.appendChild(li);
      total += subTotal;
    }
  });
  const discountedTotal = total - discount;
  totalPrice.textContent = `Total: ${discountedTotal.toLocaleString()} LKR`;
}

window.previewReceipt = function(){
  const file = document.getElementById("receipt").files[0];
  if(file && file.type.startsWith("image/")){
    const reader = new FileReader();
    reader.onload = e => { receiptPreview.src = e.target.result; receiptPreview.style.display = "block"; };
    reader.readAsDataURL(file);
  } else { receiptPreview.style.display = "none"; }
}

window.applyPromo = function(){
  const code = document.getElementById("promoCode").value.trim();
  if(code.toUpperCase() === "NIM10"){
    discount = Math.floor(total*0.1);
    alert("‚úÖ Promo applied! 10% discount.");
  } else { discount = 0; alert("‚ö†Ô∏è Invalid promo code."); }
  updateOrder();
}

window.clearCart = function(){
  products.forEach((p,i)=>document.getElementById(`qty-${i}`).textContent="0");
  discount=0; document.getElementById("promoCode").value="";
  updateOrder();
  receiptPreview.style.display="none";
  document.getElementById("receipt").value="";
  document.getElementById("success").style.display="none";
}

window.sendOrder = function(){
  const playerId = document.getElementById("playerId").value.trim();
  const receipt = document.getElementById("receipt").files[0];
  if(!playerId){alert("‚ö†Ô∏è Enter Player ID!"); return;}
  if(order.length===0){alert("‚ö†Ô∏è Select at least one package!"); return;}
  if(!receipt){alert("‚ö†Ô∏è Upload payment receipt!"); return;}

  const orderNumber = "ORD"+Date.now();
  const { jsPDF } = window.jspdf;
  const pdf = new jsPDF('p','mm','a4');

  // Gradient header
  pdf.setFillColor(0,123,255);
  pdf.rect(0,0,210,25,'F');
  pdf.setFontSize(18);
  pdf.setTextColor(255,255,255);
  pdf.setFont("helvetica","bold");
  pdf.text("üíé FREE FIRE TOP-UP ORDER üíé",105,16,{align:"center"});

  // Logo top-left
  const logo = new Image();
  logo.src = "https://files.catbox.moe/qhr7sl.jpg";
  logo.onload = function(){
    pdf.addImage(logo,'JPEG',10,5,20,20);

    pdf.setFontSize(12);
    pdf.setTextColor(0,0,0);
    pdf.setFont("helvetica","normal");
    pdf.text(`Order No: ${orderNumber}`,10,35);
    pdf.text(`Player ID: ${playerId}`,10,42);
    pdf.text(`Total: ${(total-discount).toLocaleString()} LKR`,10,49);

    // Order table
    let y = 58;
    pdf.setDrawColor(0,123,255);
    pdf.setFillColor(0,123,255,0.1);
    pdf.rect(10,y-5,190,8,'F');
    pdf.text("Item",12,y);
    pdf.text("Qty",100,y);
    pdf.text("Subtotal",150,y);
    y+=6;
    order.forEach(o=>{
      pdf.text(o.name,12,y);
      pdf.text(String(o.qty),110,y);
      pdf.text(`${o.subTotal.toLocaleString()} LKR`,150,y);
      y+=8;
    });

    // Receipt
    if(receipt.type.startsWith("image/")){
      const reader = new FileReader();
      reader.onload = e=>{
        pdf.addPage();
        pdf.setFontSize(14);
        pdf.setTextColor(0,123,255);
        pdf.text("üìé Payment Receipt",10,20);
        pdf.addImage(e.target.result,'JPEG',10,30,180,160);
        pdf.save(`Order_${orderNumber}.pdf`);
      };
      reader.readAsDataURL(receipt);
    } else {
      pdf.save(`Order_${orderNumber}.pdf`);
    }

    // WhatsApp message
    let orderText = order.map(o=>`${o.name} x${o.qty} = ${o.subTotal.toLocaleString()} LKR`).join("\n");
    const message = `
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë üíé FREE FIRE ORDER üíé ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
Order No: ${orderNumber}
Player ID: ${playerId}
Order:
${orderText}
Total: ${(total-discount).toLocaleString()} LKR
Payment receipt attached
Link: ${window.location.href}`;
    const waUrl = "https://wa.me/94763208285?text=" + encodeURIComponent(message);
    window.open(waUrl,"_blank");
    document.getElementById("success").style.display="block";
  }
}
});
</script>
</body>
</html>