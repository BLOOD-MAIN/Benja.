<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Benja Free Fire Top-Up Store</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,sans-serif;}
body{background:#0a0e17;color:#fff;overflow-x:hidden;}
header{height:220px;background:url('https://files.catbox.moe/qhr7sl.jpg') center/cover no-repeat;filter:brightness(0.35) blur(1px);border-bottom:2px solid rgba(0,153,255,0.4);}
.logo-area{position:relative;text-align:center;margin-top:-60px;}
.logo-area img{width:120px;border-radius:50%;border:3px solid #00aaff;box-shadow:0 0 25px #00aaff;background:#0f1218;}
.logo-area h1{font-size:28px;color:#00b7ff;margin-top:10px;text-shadow:0 0 15px #009dff;}
.logo-area p{font-size:14px;color:#a0caff;margin-top:4px;}
.container{padding:20px;max-width:950px;margin:20px auto;}
.card{background-color:rgba(17,22,33,0.85);border-radius:12px;padding:20px;margin-bottom:20px;border:1px solid rgba(0,153,255,0.3);box-shadow:0 0 20px rgba(0,153,255,0.1);backdrop-filter:blur(6px);}
.card h2{text-align:center;color:#00b7ff;margin-bottom:15px;font-size:22px;}
.packages{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;}
.item{background:rgba(255,255,255,0.05);padding:12px;text-align:center;border-radius:10px;transition:all 0.3s ease;border:1px solid rgba(0,153,255,0.2);}
.item:hover{transform:scale(1.05);box-shadow:0 0 20px #00aaff;}
.item img{width:90px;border-radius:8px;}
.item .price{color:#00eaff;font-weight:bold;margin-bottom:5px;}
.qty-controls{display:flex;justify-content:center;align-items:center;gap:8px;margin-top:5px;}
.qty-controls button{padding:5px 10px;background:#0078ff;border:none;color:#fff;border-radius:5px;cursor:pointer;font-weight:bold;font-size:14px;transition:0.2s;}
.qty-controls button:hover{background:#009eff;}
.qty-controls span{min-width:25px;text-align:center;display:inline-block;}
.file-upload{display:flex;align-items:center;justify-content:center;position:relative;border:2px dashed rgba(0,153,255,0.4);border-radius:10px;padding:15px;cursor:pointer;transition:0.3s;background:rgba(0,153,255,0.05);margin-top:10px;}
.file-upload:hover{background:rgba(0,153,255,0.1);box-shadow:0 0 10px #00aaff;}
.file-upload input[type="file"]{position:absolute;opacity:0;cursor:pointer;width:100%;height:100%;}
.file-upload span{color:#00b7ff;font-weight:600;}
.whatsapp-btn{background-color:#0078ff;color:#fff;padding:12px;border:none;border-radius:8px;font-weight:bold;font-size:16px;width:100%;cursor:pointer;transition:background 0.3s;box-shadow:0 0 15px rgba(0,153,255,0.3);margin-top:10px;}
.whatsapp-btn:hover{background-color:#009eff;box-shadow:0 0 25px rgba(0,153,255,0.6);}
.order-summary{margin-top:20px;background:rgba(0,0,0,0.3);border-radius:10px;padding:20px;border:1px solid rgba(0,153,255,0.3);}
.success-message{display:none;background:rgba(0,255,0,0.05);border-left:5px solid #00ffb0;text-align:center;padding:15px;margin-top:20px;color:#00ffb0;}
#receiptPreview{margin-top:10px;max-width:100%;border-radius:10px;}
#promoCode{width:50%;padding:8px;margin-top:10px;border-radius:5px;border:1px solid rgba(0,153,255,0.3);background:rgba(0,0,0,0.4);color:#fff;}
#applyPromo{padding:8px 12px;margin-left:5px;background:#00b7ff;color:#000;border:none;border-radius:5px;cursor:pointer;font-weight:bold;}
#clearCart{padding:8px 12px;margin-top:10px;background:#ff0055;color:#fff;border:none;border-radius:5px;cursor:pointer;font-weight:bold;}
/* Player ID styling */
#playerId{flex:1;padding:10px 15px;border-radius:8px;border:1px solid #00b7ff;background:rgba(0,0,0,0.4);color:#fff;font-size:16px;outline:none;transition:0.3s;}
#playerId:focus{border-color:#00eaff;box-shadow:0 0 10px #00eaff;background:rgba(0,0,0,0.6);}
.player-id-container{margin-top:15px;display:flex;align-items:center;gap:10px;}
</style>
</head>
<body>
<header></header>
<div class="logo-area">
  <img src="src/IMG-20251020-WA0000.jpg" alt="NIM Logo">
  <h1>BENJA TOPUP STORE</h1>
  <p>Fast • Trusted • Secure</p>
</div>

<div class="container">
  <div class="card">
    <h2>💎 Select Your Package</h2>
    <div class="packages" id="packages"></div>
  </div>

  <div class="card">
    <h2>📋 Your Order</h2>
    <div class="order-summary" id="orderSummary">
      
      <!-- Player ID Input -->
      <div class="player-id-container">
        <span>👤</span>
        <input type="text" id="playerId" placeholder="Enter your Free Fire ID">
      </div>

      <!-- File Upload -->
      <label style="margin-top:15px;display:block;"><b>Upload Payment Receipt (PDF/Image):</b></label>
      <div class="file-upload" onclick="document.getElementById('receipt').click()">
        <span>📎 Choose File</span>
        <input type="file" id="receipt" accept="image/*,.pdf" onchange="previewReceipt()">
      </div>
      <img id="receiptPreview" src="" alt="" style="display:none;"/>

      <!-- Order Details -->
      <h3 style="margin-top:15px;color:#00eaff;">Order Details:</h3>
      <ul id="orderList" style="list-style:none;margin-top:10px;padding-left:0;"></ul>
      <p id="totalPrice" style="text-align:right;font-weight:bold;font-size:16px;margin-top:10px;">Total: 0 LKR</p>

      <!-- Promo & Clear -->
      <div>
        <input type="text" id="promoCode" placeholder="Enter Promo Code">
        <button id="applyPromo" onclick="applyPromo()">Apply</button>
      </div>
      <button id="clearCart" onclick="clearCart()">Clear Cart</button>

      <!-- WhatsApp Button -->
      <button class="whatsapp-btn" onclick="sendOrder()">🚀 Send Order via WhatsApp</button>

      <div id="success" class="success-message">
        ✅ Order prepared successfully!<br>
        ⏳ Please check WhatsApp to send your order.<br>
        🙏 Thank You ❤️
      </div>
    </div>
  </div>
</div>

<footer>© 2025 BENJA TopUp Store | All Rights Reserved</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
const products = [
  {name:"Weekly Lite Membership",price:120,img:"https://i.ibb.co/3yzYB4tc/2681e4aad1c72837.jpg"},
  {name:"Weekly Membership",price:480,img:"https://i.ibb.co/XxPzttVP/af85c42caad4127d.jpg"},
  {name:"Monthly Membership",price:2300,img:"https://i.ibb.co/m5HtMtfJ/64dbaeaedb021e55.jpg"},
  {name:"100 Diamonds",price:270,img:"https://i.ibb.co/HfR9TPWw/c26786fb15d7e0f8.jpg"},
  {name:"520 Diamonds",price:1360,img:"https://i.ibb.co/HfR9TPWw/c26786fb15d7e0f8.jpg"},
  {name:"1080 Diamonds",price:2880,img:"https://i.ibb.co/HfR9TPWw/c26786fb15d7e0f8.jpg"}
];

const packageContainer = document.getElementById("packages");
const orderList = document.getElementById("orderList");
const totalPrice = document.getElementById("totalPrice");
const receiptPreview = document.getElementById("receiptPreview");
let order = [], total = 0, discount = 0;

// Create product cards
products.forEach((p,i)=>{
  let item = document.createElement("div");
  item.className = "item";
  item.innerHTML = `
    <img src="${p.img}" alt="${p.name}">
    <p>${p.name}</p>
    <p class="price">${p.price.toLocaleString()} LKR</p>
    <div class="qty-controls">
      <button onclick="changeQty(${i},-1)">-</button>
      <span id="qty-${i}">0</span>
      <button onclick="changeQty(${i},1)">+</button>
    </div>
  `;
  packageContainer.appendChild(item);
});

function changeQty(index, delta){
  let currentQty = parseInt(document.getElementById(`qty-${index}`).textContent);
  currentQty += delta;
  if(currentQty < 0) currentQty = 0;
  document.getElementById(`qty-${index}`).textContent = currentQty;
  updateOrder();
}

function updateOrder(){
  order = []; total = 0; orderList.innerHTML = "";
  products.forEach((p,i)=>{
    let qty = parseInt(document.getElementById(`qty-${i}`).textContent);
    if(qty>0){
      const subTotal = p.price * qty;
      order.push({name:p.name, qty, subTotal});
      const li = document.createElement("li");
      li.textContent = `${p.name} x${qty} = ${subTotal.toLocaleString()} LKR`;
      orderList.appendChild(li);
      total += subTotal;
    }
  });
  const discountedTotal = total - discount;
  totalPrice.textContent = `Total: ${discountedTotal.toLocaleString()} LKR`;
}

function previewReceipt(){
  const file = document.getElementById("receipt").files[0];
  if(file && file.type.startsWith("image/")){
    const reader = new FileReader();
    reader.onload = e => { receiptPreview.src = e.target.result; receiptPreview.style.display = "block"; };
    reader.readAsDataURL(file);
  } else { receiptPreview.style.display = "none"; }
}

function applyPromo(){
  const code = document.getElementById("promoCode").value.trim();
  if(code.toUpperCase() === "NIM10"){
    discount = Math.floor(total * 0.1);
    alert("✅ Promo applied! 10% discount.");
  } else { discount = 0; alert("⚠️ Invalid promo code."); }
  updateOrder();
}

function clearCart(){
  products.forEach((p,i)=>{document.getElementById(`qty-${i}`).textContent = "0";});
  discount = 0;
  document.getElementById("promoCode").value="";
  updateOrder();
  receiptPreview.style.display = "none";
  document.getElementById("receipt").value = "";
  document.getElementById("success").style.display="none";
}

function sendOrder(){
  const playerId = document.getElementById("playerId").value.trim();
  const receipt = document.getElementById("receipt").files[0];
  if(!playerId){alert("⚠️ Please enter your Player ID!");return;}
  if(order.length===0){alert("⚠️ Please select at least one package!");return;}
  if(!receipt){alert("⚠️ Please upload your payment receipt!");return;}

  const orderNumber = "ORD" + Date.now();
  let orderText = order.map(o=>`${o.name} x${o.qty} = ${o.subTotal.toLocaleString()} LKR`).join("\n");
  const message=`╔════════════════════╗
║   💎 FREE FIRE ORDER 💎   ║
╚════════════════════╝

╔════════════════════╗
║ Order No: ${orderNumber}       ║
║ 👤 Player ID: ${playerId}      ║
║ 🛒 Order:                      ║
║ ${orderText.replace(/\n/g, '\n║ ')} ║
║ 💰 Total: ${(total-discount).toLocaleString()} LKR ║
║ 📎 Payment receipt attached     ║
║ 🔗 Web Link: ${window.location.href} ║
╚════════════════════╝

╔════════════════════╗
║        ✅ Thank you!       ║
╚════════════════════╝`;

  // PDF Creation
  const { jsPDF } = window.jspdf;
  const pdf = new jsPDF('p','mm','a4');
  pdf.setFont("helvetica","bold");
  pdf.setFontSize(16);
  pdf.text("💎 FREE FIRE TOP-UP ORDER 💎", 105, 20, {align:"center"});
  pdf.setFontSize(12);
  pdf.setFont("helvetica","normal");
  pdf.text(`Order No: ${orderNumber}`, 10, 35);
  pdf.text(`Player ID: ${playerId}`, 10, 43);
  pdf.text(`Total: ${(total-discount).toLocaleString()} LKR`, 10, 51);
  pdf.text("Order Summary:", 10, 59);
  let y=67;
  order.forEach(o=>{pdf.text(`${o.name} x${o.qty} = ${o.subTotal.toLocaleString()} LKR`,12,y); y+=8;});

  if(receipt && receipt.type.startsWith("image/")){
    const reader = new FileReader();
    reader.onload = e=>{
      pdf.addPage();
      pdf.text("📎 Payment Receipt", 10, 20);
      pdf.addImage(e.target.result,'JPEG',10,30,180,160);
      pdf.save(`Order_${orderNumber}.pdf`);
    };
    reader.readAsDataURL(receipt);
  } else { pdf.save(`Order_${orderNumber}.pdf`); }

  const waUrl="https://wa.me/94763208285?text="+encodeURIComponent(message);
  window.open(waUrl,"_blank");
  document.getElementById("success").style.display="block";
}
</script>
</body>
</html>