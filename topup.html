<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>NIM Free Fire Top-Up & Gem Store</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Poppins',sans-serif;background:#0a0e17;color:#fff;overflow-x:hidden;transition:0.3s;}
body.dark{background:#f5f5f5;color:#111;}
body::before{content:"";position:fixed;top:0;left:0;width:100%;height:100%;
background: radial-gradient(circle, rgba(0,153,255,0.15) 2px, transparent 2px);
background-size: 60px 60px; filter:blur(3px);
animation:moveDots 20s linear infinite; z-index:-2;}
@keyframes moveDots {0%{background-position:0 0;}100%{background-position:400px 400px;}}
header{height:220px;background:url('https://i.ibb.co/Czbc8Lv/freefire-cover.jpg') center/cover no-repeat;
filter:brightness(0.4) blur(1px);border-bottom:3px solid rgba(0,153,255,0.4);}
.logo-area{text-align:center;margin-top:-60px;}
.logo-area img{width:120px;border-radius:50%;border:3px solid #00aaff;box-shadow:0 0 30px #00bfff;background:#0f1218;transition:0.3s;}
.logo-area img:hover{transform:scale(1.1);box-shadow:0 0 40px #00dfff;}
.logo-area h1{font-size:30px;color:#00b7ff;margin-top:10px;text-shadow:0 0 20px #009dff;}
.logo-area p{font-size:14px;color:#a0caff;margin-top:5px;}
.container{max-width:980px;margin:20px auto;padding:20px;}
.card{background: rgba(17,22,33,0.9); border-radius:15px; padding:25px; margin-bottom:25px; border:1px solid rgba(0,153,255,0.4); box-shadow:0 8px 25px rgba(0,153,255,0.2); backdrop-filter:blur(8px);}
.card h2{text-align:center;font-size:24px;color:#00b7ff;margin-bottom:20px;text-shadow:0 0 8px #00dfff;}
.packages{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:18px;}
.item{background: rgba(255,255,255,0.07); padding:15px; text-align:center; border-radius:12px; border:1px solid rgba(0,153,255,0.25); transition:0.4s;}
.item:hover{transform:scale(1.07); box-shadow:0 0 25px #00aaff;}
.item img{width:100px;border-radius:10px;margin-bottom:10px;}
.item .price{color:#00eaff;font-weight:bold;margin-bottom:8px;}
input[type="number"], input[type="text"], select{width:100%; padding:12px; margin-top:10px; background: rgba(0,0,0,0.45); color:white; border:1px solid rgba(0,153,255,0.3); border-radius:6px; text-align:center; transition:0.3s;}
input[type="number"]:focus,input[type="text"]:focus,select:focus{outline:none;border-color:#00dfff;background: rgba(0,0,0,0.55);}
.whatsapp-btn{background:linear-gradient(90deg,#00b7ff,#0078ff); color:#fff; padding:14px; border:none; border-radius:10px; font-weight:bold; font-size:16px; width:100%; cursor:pointer; transition:0.4s; box-shadow:0 0 20px rgba(0,153,255,0.4); margin-top:10px;}
.whatsapp-btn:hover{background:linear-gradient(90deg,#0078ff,#00d7ff); box-shadow:0 0 30px rgba(0,153,255,0.7);}
.order-summary{margin-top:20px; background: rgba(0,0,0,0.35); border-radius:12px; padding:25px; border:1px solid rgba(0,153,255,0.35);}
.success-message{display:none;background: rgba(0,255,0,0.08); border-left:5px solid #00ffb0; text-align:center; padding:15px; margin-top:20px; color:#00ffb0; font-weight:bold;}
.bank-section{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:18px;}
.bank-box{background: rgba(255,255,255,0.08); padding:18px; border-radius:12px; border-left:4px solid #00aaff; transition:0.3s;}
.bank-box b{color:#00b7ff;}
footer{text-align:center;color:#8bbaff;font-size:13px;margin:40px 0;}
body.dark .card{background: rgba(240,240,240,0.95); color:#111; border:1px solid #00b7ff;}
body.dark .order-summary{background: rgba(230,230,230,0.95);}
body.dark input, body.dark select{background:#f0f0f0; color:#111; border:1px solid #00b7ff;}
body.dark .bank-box{background:#f7f7f7; border-left:4px solid #00b7ff;}
</style>
</head>
<body>
<header></header>

<div class="logo-area">
  <!-- Profile Picture (Game Logo) -->
  <img src="https://upload.wikimedia.org/wikipedia/commons/0/0d/Freefire_logo.png" alt="NIM Logo">
  <h1>NIM TOPUP STORE</h1>
  <p>Fast • Trusted • Secure</p>
</div>

<div class="container">

  <!-- Membership Packages -->
  <div class="card">
    <h2>Select Membership Package</h2>
    <div class="packages" id="packages"></div>
  </div>

  <!-- Gem Store -->
  <div class="card">
    <h2>Gem Store</h2>
    <div class="packages" id="gem-packages"></div>
  </div>

  <!-- Order Section -->
  <div class="card">
    <h2>Order Summary</h2>
    <div class="order-summary">
      <label><b>Player ID:</b></label>
      <input type="text" id="playerId" placeholder="Enter your Free Fire ID">

      <label><b>Upload Payment Receipt (Image/PDF):</b></label>
      <input type="file" id="receipt" accept="image/*,.pdf" multiple>

      <label><b>Payment Method:</b></label>
      <select id="payment-method" onchange="updateTotal()">
        <option value="bank">Bank</option>
        <option value="ezcash">EZ Cash (+20 LKR)</option>
      </select>

      <label><b>Promo Code:</b></label>
      <input type="text" id="promo-code" placeholder="Enter code" oninput="applyPromo()">

      <button class="whatsapp-btn" onclick="sendOrder()">Send Order via WhatsApp</button>
      <button class="whatsapp-btn" onclick="copyMessage()">Copy Order Message</button>
      <button class="whatsapp-btn" onclick="toggleTheme()">Toggle Theme</button>

      <div id="success" class="success-message"></div>
      <div id="order-list" style="margin-top:15px;"></div>
      <p><b>Items Selected:</b> <span id="items">0</span></p>
      <p><b>Total:</b> <span id="total">0</span> LKR</p>
    </div>
  </div>

  <!-- Payment Details -->
  <div class="card">
    <h2>Payment Details</h2>
    <div class="bank-section">
      <div class="bank-box">
        <p><b>Bank - NSB</b><br>Account: 109090193739<br>Name: G.M.N.N.JAYASURIYA<br>Branch: Ampara 2nd</p>
      </div>
      <div class="bank-box">
        <p><b>Bank - Dialog Finance PLC</b><br>Account: 001021434294<br>Name: Gardiya M. Nethmintha Nimsara J.<br>Branch: Head Office</p>
      </div>
      <div class="bank-box">
        <p><b>Bank - Peoples Bank</b><br>Account: 015200130082418<br>Name: Nethmintha Nimsara<br>Branch: Ampara</p>
      </div>
    </div>
    <p style="margin-top:15px;">EZ Cash: 0740532742 (Add Rs.20 extra)</p>
  </div>

</div>

<footer>
  © 2025 NIM TopUp Store | All Rights Reserved
</footer>

<script>
// Packages
const products = [
  { name: "Weekly Lite Membership", price: 120, img: "https://i.ibb.co/3yzYB4tc/2681e4aad1c72837.jpg", stock:10 },
  { name: "Weekly Membership", price: 480, img: "https://i.ibb.co/XxPzttVP/af85c42caad4127d.jpg", stock:10 },
  { name: "Monthly Membership", price: 2300, img: "https://i.ibb.co/m5HtMtfJ/64dbaeaedb021e55.jpg", stock:10 }
];

const gemProducts = [
  { name: "100 Gems", price: 300, img: "https://i.ibb.co/HfR9TPWw/c26786fb15d7e0f8.jpg", stock:10 },
  { name: "520 Gems", price: 1500, img: "https://i.ibb.co/HfR9TPWw/c26786fb15d7e0f8.jpg", stock:10 },
  { name: "1080 Gems", price: 3000, img: "https://i.ibb.co/HfR9TPWw/c26786fb15d7e0f8.jpg", stock:10 }
];

let order=[], total=0;
const packageContainer=document.getElementById("packages");
const gemContainer=document.getElementById("gem-packages");
const orderList=document.getElementById("order-list");
const itemsEl=document.getElementById("items");
const totalEl=document.getElementById("total");
const successMsg=document.getElementById("success");

// Render membership packages
products.forEach((p,i)=>{
  let item=document.createElement("div");
  item.className="item";
  item.innerHTML=`<img src="${p.img}" alt="${p.name}"><p>${p.name}</p><p class="price" id="price-${i}">${p.price.toLocaleString()} LKR</p><input type="number" id="qty-${i}" value="0" min="0" max="${p.stock}" onchange="updateOrder()">`;
  packageContainer.appendChild(item);
});

// Render gem packages
gemProducts.forEach((p,i)=>{
  let item=document.createElement("div");
  item.className="item";
  item.innerHTML=`<img src="${p.img}" alt="${p.name}"><p>${p.name}</p><p class="price" id="gprice-${i}">${p.price.toLocaleString()} LKR</p><input type="number" id="gqty-${i}" value="0" min="0" max="${p.stock}" onchange="updateOrder()">`;
  gemContainer.appendChild(item);
});

// Update order
function updateOrder(){
  order=[];
  total=0;
  products.forEach((p,i)=>{
    let qty=parseInt(document.getElementById(`qty-${i}`).value)||0;
    if(qty>0){ order.push(`${p.name} x${qty} = ${(p.price*qty).toLocaleString()} LKR`); total+=p.price*qty;}
    document.getElementById(`price-${i}`).textContent=`${(p.price*qty||p.price).toLocaleString()} LKR`;
  });
  gemProducts.forEach((p,i)=>{
    let qty=parseInt(document.getElementById(`gqty-${i}`).value)||0;
    if(qty>0){ order.push(`${p.name} x${qty} = ${(p.price*qty).toLocaleString()} LKR`); total+=p.price*qty;}
    document.getElementById(`gprice-${i}`).textContent=`${(p.price*qty||p.price).toLocaleString()} LKR`;
  });
  applyPromo();
  orderList.innerHTML=order.join("<br>");
  itemsEl.textContent=order.length;
}

// Promo code
function applyPromo(){
  const code=document.getElementById("promo-code").value.trim();
  let finalTotal=total;
  if(code==="FREE50") finalTotal-=50;
  const method = document.getElementById("payment-method").value;
  if(method==="ezcash") finalTotal+=20;
  totalEl.textContent=finalTotal.toLocaleString();
}

// Payment method change
function updateTotal(){applyPromo();}

// Dark/Light theme
function toggleTheme(){
  document.body.classList.toggle("dark");
}

// Copy message
function copyMessage(){
  const playerId=document.getElementById("playerId").value.trim();
  if(!playerId || order.length===0){return alert("Please enter Player ID and select packages!");}
  let message=`FREE FIRE ORDER\nPlayer ID: ${playerId}\nOrder:\n${order.join("\n")}\nTotal: ${totalEl.textContent} LKR`;
  navigator.clipboard.writeText(message).then(()=> alert("Order message copied!"));
}

// PDF + WhatsApp
async function sendOrder(){
  const { jsPDF } = window.jspdf;
  const playerId=document.getElementById("playerId").value.trim();
  const receiptFiles=document.getElementById("receipt").files;
  if(!playerId) return alert("Enter Player ID!");
  if(order.length===0) return alert("Select at least one package!");
  if(receiptFiles.length===0) return alert("Upload at least one receipt!");
  const pdf=new jsPDF();
  pdf.setFontSize(18); pdf.setTextColor(0,0,255);
  pdf.text("FREE FIRE ORDER",105,20,null,null,"center");
  pdf.setFontSize(12); pdf.setTextColor(0,0,0);
  pdf.text(`Player ID: ${playerId}`,20,40);
  let y=50;
  order.forEach(item=>{pdf.text(item,20,y); y+=10;});
  pdf.text(`Total: ${totalEl.textContent} LKR`,20,y+10);
  // Add receipts images
  for(let i=0;i<receiptFiles.length;i++){
    if(receiptFiles[i].type.startsWith("image/")){
      const reader=new FileReader();
      reader.onload=function(e){ pdf.addImage(e.target.result,'PNG',20,y+20,150,100); pdf.save("Order.pdf"); }
      reader.readAsDataURL(receiptFiles[i]);
    }
  }
  // WhatsApp message
  let msg=`FREE FIRE ORDER\nPlayer ID: ${playerId}\nOrder:\n${order.join("\n")}\nTotal: ${totalEl.textContent} LKR`;
  window.open(`https://wa.me/94784280074?text=${encodeURIComponent(msg)}`,"_blank");
  successMsg.style.display="block"; successMsg.textContent="✅ Order prepared! Check WhatsApp.";
}
</script>
</body>
</html>