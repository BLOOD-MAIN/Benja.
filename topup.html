<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>NIM Free Fire Top-Up Store</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Tailwind optional -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- jsPDF CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body { font-family:'Poppins', sans-serif; background:#0a0e17; color:#fff; overflow-x:hidden; }
    body::before {
      content:""; position:fixed; top:0; left:0; width:100%; height:100%;
      background: radial-gradient(circle, rgba(0,153,255,0.2) 2px, transparent 2px);
      background-size: 60px 60px; filter:blur(3px);
      animation:moveDots 10s linear infinite; z-index:-2;
    }
    @keyframes moveDots { 0%{background-position:0 0;}100%{background-position:200px 200px;} }

    header {
      height:220px;
      background:url('https://i.ibb.co/Czbc8Lv/freefire-cover.jpg') center/cover no-repeat;
      filter:brightness(0.35) blur(1px);
      border-bottom:2px solid rgba(0,153,255,0.4);
    }

    .logo-area { text-align:center; margin-top:-60px; }
    .logo-area img { width:120px; border-radius:50%; border:3px solid #00aaff; box-shadow:0 0 25px #00aaff; background:#0f1218; }
    .logo-area h1 { font-size:28px; color:#00b7ff; margin-top:10px; text-shadow:0 0 15px #009dff; }
    .logo-area p { font-size:14px; color:#a0caff; margin-top:4px; }

    .container { max-width:950px; margin:20px auto; padding:20px; }
    .card { background: rgba(17,22,33,0.85); border-radius:12px; padding:20px; margin-bottom:20px; border:1px solid rgba(0,153,255,0.3); box-shadow:0 0 20px rgba(0,153,255,0.1); backdrop-filter:blur(6px);}
    .card h2 { text-align:center; font-size:22px; color:#00b7ff; margin-bottom:15px; }

    .packages { display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr)); gap:15px; }
    .item { background: rgba(255,255,255,0.05); padding:12px; text-align:center; border-radius:10px; border:1px solid rgba(0,153,255,0.2); transition:0.3s; }
    .item:hover { transform:scale(1.05); box-shadow:0 0 20px #00aaff; }
    .item img { width:90px; border-radius:8px; }
    .item .price { color:#00eaff; font-weight:bold; }

    input[type="number"], input[type="text"] { width:100%; padding:10px; margin-top:8px; background: rgba(0,0,0,0.4); color:white; border:1px solid rgba(0,153,255,0.3); border-radius:5px; text-align:center; }

    .whatsapp-btn { background:#0078ff; color:#fff; padding:12px; border:none; border-radius:8px; font-weight:bold; font-size:16px; width:100%; cursor:pointer; transition:0.3s; box-shadow:0 0 15px rgba(0,153,255,0.3); }
    .whatsapp-btn:hover { background:#009eff; box-shadow:0 0 25px rgba(0,153,255,0.6); }

    .order-summary { margin-top:20px; background: rgba(0,0,0,0.3); border-radius:10px; padding:20px; border:1px solid rgba(0,153,255,0.3); }
    .success-message { display:none; background: rgba(0,255,0,0.05); border-left:5px solid #00ffb0; text-align:center; padding:15px; margin-top:20px; color:#00ffb0; }

    .bank-section { display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:15px; }
    .bank-box { background: rgba(255,255,255,0.05); padding:15px; border-radius:10px; border-left:3px solid #00aaff; }
    .bank-box b { color:#00b7ff; }

    footer { text-align:center; color:#8bbaff; font-size:13px; margin:40px 0; }
  </style>
</head>

<body>
<header></header>

<div class="logo-area">
  <img src="https://i.ibb.co/tPw8mzct/1e6bc3f6d139fdf8.jpg" alt="NIM Logo">
  <h1>NIM TOPUP STORE</h1>
  <p>Fast ‚Ä¢ Trusted ‚Ä¢ Secure</p>
</div>

<div class="container">

  <!-- Packages -->
  <div class="card">
    <h2>üíé Select Your Package</h2>
    <div class="packages" id="packages"></div>
  </div>

  <!-- Order Section -->
  <div class="card">
    <h2>üìã Your Order</h2>
    <div class="order-summary">
      <label><b>Player ID:</b></label>
      <input type="text" id="playerId" placeholder="Enter your Free Fire ID">

      <label><b>Upload Payment Receipt (Image/PDF):</b></label>
      <input type="file" id="receipt" accept="image/*,.pdf">

      <button class="whatsapp-btn" onclick="sendOrder()">üöÄ Send Order via WhatsApp</button>

      <div id="success" class="success-message">
        ‚úÖ Order PDF prepared!<br>‚è≥ Please check WhatsApp to send your order.<br>üôè Thank You ‚ù§Ô∏è
      </div>

      <div id="order-list" style="margin-top:15px;"></div>
      <p><b>Items Selected:</b> <span id="items">0</span></p>
      <p><b>Total:</b> <span id="total">0</span> LKR</p>
    </div>
  </div>

  <!-- Payment Details -->
  <div class="card">
    <h2>üí∞ Payment Details</h2>
    <div class="bank-section">
      <div class="bank-box">
        <p>üè¶ <b>Bank - NSB</b><br>Account: 109090193739<br>Name: G.M.N.N.JAYASURIYA<br>Branch: Ampara 2nd</p>
      </div>
      <div class="bank-box">
        <p>üè¶ <b>Bank - Dialog Finance PLC</b><br>Account: 001021434294<br>Name: Gardiya M. Nethmintha Nimsara J.<br>Branch: Head Office</p>
      </div>
      <div class="bank-box">
        <p>üè¶ <b>Bank - Peoples Bank</b><br>Account: 015200130082418<br>Name: Nethmintha Nimsara<br>Branch: Ampara</p>
      </div>
    </div>
    <p style="margin-top:15px;">ü™Ñ <b>EZ Cash:</b> 0740532742<br>‚ö†Ô∏è Add Rs.20 extra for EZ Cash payments.</p>
  </div>

</div>

<footer>
  ¬© 2025 NIM TopUp Store | All Rights Reserved
</footer>

<script>
  // Product List
  const products = [
    { name: "Weekly Lite Membership", price: 120, img: "https://i.ibb.co/3yzYB4tc/2681e4aad1c72837.jpg" },
    { name: "Weekly Membership", price: 480, img: "https://i.ibb.co/XxPzttVP/af85c42caad4127d.jpg" },
    { name: "Monthly Membership", price: 2300, img: "https://i.ibb.co/m5HtMtfJ/64dbaeaedb021e55.jpg" },
    { name: "100 Diamonds", price: 270, img: "https://i.ibb.co/HfR9TPWw/c26786fb15d7e0f8.jpg" },
    { name: "520 Diamonds", price: 1360, img: "https://i.ibb.co/HfR9TPWw/c26786fb15d7e0f8.jpg" },
    { name: "1080 Diamonds", price: 2880, img: "https://i.ibb.co/HfR9TPWw/c26786fb15d7e0f8.jpg" }
  ];

  const packageContainer = document.getElementById("packages");
  const orderList = document.getElementById("order-list");
  const itemsEl = document.getElementById("items");
  const totalEl = document.getElementById("total");
  const successMsg = document.getElementById("success");

  let order = [];
  let total = 0;

  products.forEach((p,i)=>{
    let item = document.createElement("div");
    item.className="item";
    item.innerHTML = `
      <img src="${p.img}" alt="${p.name}">
      <p>${p.name}</p>
      <p class="price">${p.price.toLocaleString()} LKR</p>
      <input type="number" id="qty-${i}" value="0" min="0" onchange="updateOrder()">
    `;
    packageContainer.appendChild(item);
  });

  function updateOrder(){
    order=[];
    total=0;
    products.forEach((p,i)=>{
      let qty=parseInt(document.getElementById(`qty-${i}`).value)||0;
      if(qty>0){
        order.push(`${p.name} x${qty} = ${(p.price*qty).toLocaleString()} LKR`);
        total+=p.price*qty;
      }
    });
    orderList.innerHTML=order.join("<br>");
    itemsEl.textContent=order.length;
    totalEl.textContent=total.toLocaleString();
  }

  // PDF + WhatsApp
  async function sendOrder(){
    const { jsPDF } = window.jspdf;
    let playerId=document.getElementById("playerId").value.trim();
    let receipt=document.getElementById("receipt").files[0];
    const logoUrl="https://i.ibb.co/tPw8mzct/1e6bc3f6d139fdf8.jpg";

    if(!playerId) return alert("‚ö†Ô∏è Please enter your Player ID!");
    if(order.length===0) return alert("‚ö†Ô∏è Please select at least one package!");
    if(!receipt) return alert("‚ö†Ô∏è Please upload your payment receipt!");

    const pdf=new jsPDF();

    // Logo
    const logoImg=new Image();
    logoImg.crossOrigin="anonymous";
    logoImg.src=logoUrl;
    logoImg.onload=function(){
      pdf.addImage(logoImg,'PNG',80,10,50,50);
      pdf.setFontSize(18);
      pdf.setTextColor(0,0,255);
      pdf.text("üíé FREE FIRE ORDER üíé",105,70,null,null,"center");
      pdf.setFontSize(12);
      pdf.setTextColor(0,0,0);
      pdf.text(`Player ID: ${playerId}`,20,85);
      pdf.text("Order Details:",20,95);
      let y=105;
      order.forEach(item=>{pdf.text(item,25,y); y+=10;});
      pdf.text(`Total: ${total.toLocaleString()} LKR`,20,y+10);

      if(receipt.type.startsWith("image/")){
        const reader=new FileReader();
        reader.onload=function(e){
          const img=new Image();
          img.src=e.target.result;
          img.onload=function(){
            pdf.addImage(img,'PNG',20,y+20,150,100);
            pdf.save("FreeFire_Order.pdf");
          }
        };
        reader.readAsDataURL(receipt);
      } else { pdf.save("FreeFire_Order.pdf"); }

      let message=`üíé FREE FIRE ORDER üíé\nüë§ Player ID: ${playerId}\nüõí Order:\n${order.join("\n")}\nüí∞ Total: ${total.toLocaleString()} LKR\nüìé Please attach your payment receipt.\n‚úÖ Thank you!`;
      let url=`https://wa.me/94784280074?text=${encodeURIComponent(message)}`;
      window.open(url,"_blank");
      successMsg.style.display="block";
    }
  }
</script>
</body>
</html>